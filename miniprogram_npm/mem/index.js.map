{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nconst mimicFn = require('mimic-fn');\n\nconst cacheStore = new WeakMap();\n\nconst defaultCacheKey = function (x) {\n\tif (arguments.length === 1 && (x === null || x === undefined || (typeof x !== 'function' && typeof x !== 'object'))) {\n\t\treturn x;\n\t}\n\n\treturn JSON.stringify(arguments);\n};\n\nmodule.exports = (fn, opts) => {\n\topts = Object.assign({\n\t\tcacheKey: defaultCacheKey,\n\t\tcache: new Map()\n\t}, opts);\n\n\tconst memoized = function () {\n\t\tconst cache = cacheStore.get(memoized);\n\t\tconst key = opts.cacheKey.apply(null, arguments);\n\n\t\tif (cache.has(key)) {\n\t\t\tconst c = cache.get(key);\n\n\t\t\tif (typeof opts.maxAge !== 'number' || Date.now() < c.maxAge) {\n\t\t\t\treturn c.data;\n\t\t\t}\n\t\t}\n\n\t\tconst ret = fn.apply(null, arguments);\n\n\t\tcache.set(key, {\n\t\t\tdata: ret,\n\t\t\tmaxAge: Date.now() + (opts.maxAge || 0)\n\t\t});\n\n\t\treturn ret;\n\t};\n\n\tmimicFn(memoized, fn);\n\n\tcacheStore.set(memoized, opts.cache);\n\n\treturn memoized;\n};\n\nmodule.exports.clear = fn => {\n\tconst cache = cacheStore.get(fn);\n\n\tif (cache && typeof cache.clear === 'function') {\n\t\tcache.clear();\n\t}\n};\n"]}